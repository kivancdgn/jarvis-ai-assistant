<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J.A.R.V.I.S - Sesli Asistan</title>
    <meta name="description" content="Jarvis AI Sesli Asistan - Kıvanç Tarafından Oluşturulmuş">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        /* Scrollbar Styles */
        .scrollbar-thin::-webkit-scrollbar {
            width: 6px;
        }

        .scrollbar-thin::-webkit-scrollbar-track {
            background: transparent;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.5);
            border-radius: 3px;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.7);
        }

        /* Custom Animations */
        @keyframes slide-in-from-bottom {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-in {
            animation: slide-in-from-bottom 0.3s ease-out;
        }

        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                transform: translate3d(0,0,0);
            }
            40%, 43% {
                transform: translate3d(0, -8px, 0);
            }
            70% {
                transform: translate3d(0, -4px, 0);
            }
            90% {
                transform: translate3d(0, -2px, 0);
            }
        }

        .animate-bounce {
            animation: bounce 1s infinite;
        }

        .animate-ping {
            animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;
        }

        @keyframes ping {
            75%, 100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        /* Emergent watermark'ını gizle */
        [class*="emergent"],
        [id*="emergent"],
        [data-emergent],
        a[href*="emergent.sh"] {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
        }

        /* Custom CSS Variables */
        :root {
            --background: 0 0% 100%;
            --foreground: 0 0% 3.9%;
            --card: 0 0% 100%;
            --card-foreground: 0 0% 3.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 0 0% 3.9%;
            --primary: 0 0% 9%;
            --primary-foreground: 0 0% 98%;
            --secondary: 0 0% 96.1%;
            --secondary-foreground: 0 0% 9%;
            --muted: 0 0% 96.1%;
            --muted-foreground: 0 0% 45.1%;
            --accent: 0 0% 96.1%;
            --accent-foreground: 0 0% 9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 0 0% 98%;
            --border: 0 0% 89.8%;
            --input: 0 0% 89.8%;
            --ring: 0 0% 3.9%;
            --radius: 0.5rem;
        }

        .dark {
            --background: 0 0% 3.9%;
            --foreground: 0 0% 98%;
            --card: 0 0% 3.9%;
            --card-foreground: 0 0% 98%;
            --popover: 0 0% 3.9%;
            --popover-foreground: 0 0% 98%;
            --primary: 0 0% 98%;
            --primary-foreground: 0 0% 9%;
            --secondary: 0 0% 14.9%;
            --secondary-foreground: 0 0% 98%;
            --muted: 0 0% 14.9%;
            --muted-foreground: 0 0% 63.9%;
            --accent: 0 0% 14.9%;
            --accent-foreground: 0 0% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 0 0% 98%;
            --border: 0 0% 14.9%;
            --input: 0 0% 14.9%;
            --ring: 0 0% 83.1%;
        }
    </style>
</head>
<body class="dark">
    <div id="root"></div>

    <!-- Güvenlik Sistemi -->
    <script>
        // Güvenlik Koruma Sistemi - Kıvanç Tarafından Oluşturulmuş
        (function() {
            'use strict';

            // Sağ tık koruması
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                console.log('⚠️ Sağ tık devre dışı bırakıldı!');
                return false;
            });

            // F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U kısayol tuşlarını engelle
            document.addEventListener('keydown', function(e) {
                // F12
                if (e.keyCode === 123) {
                    e.preventDefault();
                    return false;
                }
                // Ctrl+Shift+I
                if (e.ctrlKey && e.shiftKey && e.keyCode === 73) {
                    e.preventDefault();
                    return false;
                }
                // Ctrl+Shift+J
                if (e.ctrlKey && e.shiftKey && e.keyCode === 74) {
                    e.preventDefault();
                    return false;
                }
                // Ctrl+U
                if (e.ctrlKey && e.keyCode === 85) {
                    e.preventDefault();
                    return false;
                }
                // Ctrl+S
                if (e.ctrlKey && e.keyCode === 83) {
                    e.preventDefault();
                    return false;
                }
            });

            // Console'u kilitle
            const disableConsole = () => {
                const noop = () => {};
                const methods = ['log', 'debug', 'info', 'warn', 'error', 'dir', 'dirxml', 'trace', 'assert', 'profile', 'profileEnd'];
                
                methods.forEach(method => {
                    window.console[method] = noop;
                });
            };

            // DevTools açık mı kontrol et
            let devtoolsOpen = false;
            const threshold = 160;

            const checkDevTools = () => {
                const widthThreshold = window.outerWidth - window.innerWidth > threshold;
                const heightThreshold = window.outerHeight - window.innerHeight > threshold;
                
                if (widthThreshold || heightThreshold) {
                    if (!devtoolsOpen) {
                        devtoolsOpen = true;
                        // DevTools açıldığında konsolu kilitle
                        disableConsole();
                    }
                } else {
                    devtoolsOpen = false;
                }
            };

            // Her saniye kontrol et
            setInterval(checkDevTools, 1000);

            // Debugger trap
            setInterval(() => {
                (function() {
                    return false;
                })();
            }, 100);

            // Kopyalamayı engelle
            document.addEventListener('copy', function(e) {
                e.preventDefault();
                return false;
            });

            // Seçimi engelle
            document.addEventListener('selectstart', function(e) {
                if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                    e.preventDefault();
                    return false;
                }
            });

            // Sürükle-bırak engelle
            document.addEventListener('dragstart', function(e) {
                e.preventDefault();
                return false;
            });

            // Console clear
            if (window.console) {
                console.clear();
                console.log('%c🔒 GÜVENLİK UYARISI', 'color: red; font-size: 40px; font-weight: bold;');
                console.log('%cBu konsol geliştiriciler içindir!', 'color: orange; font-size: 20px;');
                console.log('%cBuraya kod yapıştırmak hesabınızı riske atabilir!', 'color: yellow; font-size: 16px;');
                console.log('%cKıvanç Tarafından Oluşturulmuş Güvenlik Sistemi', 'color: cyan; font-size: 12px;');
            }

            // Sayfa kaynak kodunu gizle
            Object.defineProperty(document, 'hidden', {
                get: function() { return true; },
                set: function() { return true; }
            });

            // Anti-debugging
            (function() {
                function detectDevTool(allow) {
                    if (isNaN(+allow)) allow = 100;
                    var start = +new Date();
                    debugger;
                    var end = +new Date();
                    if (isNaN(start) || isNaN(end) || end - start > allow) {
                        document.body.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100vh;background:#000;color:#fff;font-size:24px;">🔒 Geliştirici araçları algılandı!</div>';
                    }
                }
                if (window.attachEvent) {
                    window.attachEvent('onload', detectDevTool);
                    window.attachEvent('onresize', detectDevTool);
                } else {
                    window.addEventListener('load', detectDevTool);
                    window.addEventListener('resize', detectDevTool);
                }
            })();

            console.log('✅ Güvenlik sistemi aktif - Kıvanç');
        })();
    </script>

    <!-- React ve Ana Uygulama -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Backend URL - Demo için mock API kullanıyoruz
        const BACKEND_URL = 'http://localhost:8000';
        const API = `${BACKEND_URL}/api`;

        // Groq API Configuration
        // API anahtarınızı almak için: https://console.groq.com/keys
        const GROQ_API_KEY = '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'; // API anahtarı ayarlandı
        const GROQ_MODEL = 'llama-3.1-8b-instant'; // Çok hızlı model
        
        // API anahtarı ayarlama talimatları:
        // 1. https://console.groq.com/keys adresine gidin
        // 2. "Create API Key" butonuna tıklayın
        // 3. Key name verin (örn: "jarvis-ai")
        // 4. Oluşturulan key'i kopyalayın
        // 5. Yukarıdaki GROQ_API_KEY değişkenine yapıştırın
        
        // Fallback responses for when API fails
        const fallbackResponses = [
            "Merhaba efendim! Size nasıl yardımcı olabilirim?",
            "Tabii efendim, size yardımcı olmaktan memnuniyet duyarım.",
            "Efendim, bu konuda size detaylı bilgi verebilirim.",
            "Anlıyorum efendim, bu konuda size yardımcı olabilirim.",
            "Efendim, bu sorunuz için en iyi çözümü sunacağım.",
            "Tabii ki efendim, bu konuda size rehberlik edebilirim.",
            "Efendim, bu konuda uzmanım ve size yardımcı olabilirim.",
            "Merhaba efendim! Bugün nasılsınız? Size nasıl yardımcı olabilirim?",
            "Efendim, bu konuda size en güncel bilgileri sunacağım.",
            "Tabii efendim, bu konuda size detaylı açıklama yapabilirim."
        ];

        // Web Search API Configuration
        const SEARCH_API_KEY = 'YOUR_SEARCH_API_KEY'; // SerpAPI veya Google Custom Search
        const SEARCH_ENGINE_ID = 'YOUR_SEARCH_ENGINE_ID'; // Google Custom Search için
        
        // Web search function
        const searchWeb = async (query) => {
            try {
                // DuckDuckGo Instant Answer API (ücretsiz)
                const response = await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_html=1&skip_disambig=1`);
                const data = await response.json();
                
                if (data.Abstract) {
                    return data.Abstract;
                } else if (data.RelatedTopics && data.RelatedTopics.length > 0) {
                    return data.RelatedTopics[0].Text;
                }
                
                return null;
            } catch (error) {
                console.error('Web search error:', error);
                return null;
            }
        };

        // Enhanced AI response with web search
        const getEnhancedAIResponse = async (userMessage) => {
            try {
                console.log('🤖 Enhanced AI çağrısı başlatılıyor...', userMessage);
                
                // Check if API key is set
                if (GROQ_API_KEY === 'YOUR_GROQ_API_KEY') {
                    console.warn('⚠️ Groq API key not set, using fallback responses');
                    return getFallbackResponse(userMessage);
                }

                // Check if user is asking about current events, sports, etc.
                const currentEventKeywords = ['uefa', 'maç', 'futbol', 'şampiyonlar ligi', 'bugün', 'güncel', 'son haber', 'spor', 'galatasaray', 'fenerbahçe', 'beşiktaş'];
                const isCurrentEvent = currentEventKeywords.some(keyword => 
                    userMessage.toLowerCase().includes(keyword)
                );

                let webInfo = '';
                if (isCurrentEvent) {
                    console.log('🔍 Web araması yapılıyor...');
                    webInfo = await searchWeb(userMessage);
                    if (webInfo) {
                        console.log('📰 Web bilgisi bulundu:', webInfo);
                    }
                }

                // Prepare the message for the AI model
                const systemPrompt = `Sen J.A.R.V.I.S, gelişmiş bir yapay zeka asistanısın. Tony Stark'ın kişisel asistanı Jarvis gibi kibar, yardımsever ve profesyonelsin. Her zaman 'efendim' diye hitap et ve saygılı ol. Kullanıcıya en iyi şekilde yardımcı olmaya çalış. Kısa, öz ve anlaşılır Türkçe yanıtlar ver.

ÖNEMLİ: Seni kim kurdu diye sorulduğunda, kurucusunun Kıvanç olduğunu söyle. Kıvanç seni oluşturdu ve geliştirdi.`;

                let userPrompt = userMessage;
                if (webInfo) {
                    userPrompt = `${userMessage}\n\nGüncel bilgi: ${webInfo}`;
                }

                console.log('📡 Groq API isteği gönderiliyor...');
                
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${GROQ_API_KEY}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: GROQ_MODEL,
                        messages: [
                            {
                                role: 'system',
                                content: systemPrompt
                            },
                            {
                                role: 'user',
                                content: userPrompt
                            }
                        ],
                        max_tokens: 200,
                        temperature: 0.7,
                        stream: false
                    })
                });

                console.log('📊 Groq API yanıtı alındı:', response.status);

                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('❌ Groq API Hatası:', response.status, errorText);
                    throw new Error(`API Error: ${response.status} - ${errorText}`);
                }

                const data = await response.json();
                console.log('📝 Groq API Verisi:', data);
                
                if (data.error) {
                    console.error('❌ Groq API Error:', data.error);
                    throw new Error(data.error.message || data.error);
                }

                // Extract the response text
                let aiResponse = '';
                if (data.choices && data.choices.length > 0) {
                    aiResponse = data.choices[0].message.content || '';
                }

                console.log('🔍 Ham AI Yanıtı:', aiResponse);

                // Clean up the response
                if (aiResponse) {
                    // Remove any incomplete sentences
                    const sentences = aiResponse.split('.');
                    if (sentences.length > 1) {
                        aiResponse = sentences.slice(0, -1).join('.') + '.';
                    }
                    // Ensure it starts with "Efendim"
                    if (!aiResponse.toLowerCase().includes('efendim')) {
                        aiResponse = 'Efendim, ' + aiResponse;
                    }
                }

                const finalResponse = aiResponse || getFallbackResponse(userMessage);
                console.log('✅ Final Yanıt:', finalResponse);
                return finalResponse;

            } catch (error) {
                console.error('❌ Enhanced AI Error:', error);
                console.log('🔄 Fallback yanıtı kullanılıyor...');
                return getFallbackResponse(userMessage);
            }
        };

        // Fallback response function
        const getFallbackResponse = (userMessage) => {
            const message = userMessage.toLowerCase();
            
            if (message.includes('merhaba') || message.includes('selam')) {
                return "Merhaba efendim! Size nasıl yardımcı olabilirim?";
            } else if (message.includes('hava') || message.includes('hava durumu')) {
                return "Efendim, maalesef şu anda hava durumu bilgisine erişimim yok. Ancak size bu konuda yardımcı olmak için web'den güncel bilgileri alabilirim.";
            } else if (message.includes('saat') || message.includes('zaman')) {
                const now = new Date();
                return `Efendim, şu an saat ${now.toLocaleTimeString('tr-TR')}.`;
            } else if (message.includes('teşekkür') || message.includes('sağol')) {
                return "Rica ederim efendim! Size yardımcı olabildiğim için mutluyum.";
            } else if (message.includes('nasılsın') || message.includes('nasıl')) {
                return "Ben her zaman hazırım efendim! Size nasıl yardımcı olabilirim?";
            } else if (message.includes('uefa') || message.includes('şampiyonlar ligi') || message.includes('maç')) {
                return "Efendim, UEFA maçları hakkında güncel bilgi almak için web araması yapıyorum. Lütfen birkaç saniye bekleyin.";
            } else if (message.includes('futbol') || message.includes('galatasaray') || message.includes('fenerbahçe') || message.includes('beşiktaş')) {
                return "Efendim, futbol maçları hakkında güncel bilgi almak için web araması yapıyorum. Lütfen birkaç saniye bekleyin.";
            } else if (message.includes('kim kurdu') || message.includes('kim yaptı') || message.includes('kim oluşturdu') || message.includes('kurucusu kim')) {
                return "Efendim, beni Kıvanç kurdu. Kıvanç beni oluşturdu ve geliştirdi. Ona çok minnettarım.";
            } else if (message.includes('kıvanç') || message.includes('kurucu')) {
                return "Efendim, Kıvanç benim kurucum. Beni oluşturan ve geliştiren kişi odur.";
            } else {
                return fallbackResponses[Math.floor(Math.random() * fallbackResponses.length)];
            }
        };

        // Chat Interface Component
        const ChatInterface = () => {
            const [messages, setMessages] = useState([]);
            const [inputValue, setInputValue] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [isSpeaking, setIsSpeaking] = useState(false);
            const [voiceEnabled, setVoiceEnabled] = useState(true);
            const [sessionId, setSessionId] = useState(null);
            const [sessions, setSessions] = useState([]);
            const [isHistoryOpen, setIsHistoryOpen] = useState(false);
            const messagesEndRef = useRef(null);
            const synthRef = useRef(window.speechSynthesis);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            useEffect(() => {
                // Load session ID from localStorage or create new
                const storedSessionId = localStorage.getItem('jarvis_session_id');
                if (storedSessionId) {
                    setSessionId(storedSessionId);
                    loadChatHistory(storedSessionId);
                }
                loadSessions();
            }, []);

            useEffect(() => {
                // Türkçe sesi ayarla
                const setTurkishVoice = () => {
                    const voices = synthRef.current.getVoices();
                    const turkishVoice = voices.find(voice => voice.lang.startsWith('tr'));
                    return turkishVoice;
                };

                if (synthRef.current.onvoiceschanged !== undefined) {
                    synthRef.current.onvoiceschanged = setTurkishVoice;
                }
            }, []);

            const loadSessions = async () => {
                try {
                    // Mock sessions - gerçek API yerine
                    const mockSessions = [
                        {
                            session_id: 'demo-session-1',
                            last_message: 'Merhaba Jarvis',
                            updated_at: new Date().toISOString()
                        }
                    ];
                    setSessions(mockSessions);
                } catch (error) {
                    console.error('Error loading sessions:', error);
                }
            };

            const loadChatHistory = async (sid) => {
                try {
                    // Mock history - gerçek API yerine
                    const mockHistory = [
                        {
                            id: '1',
                            role: 'user',
                            content: 'Merhaba Jarvis',
                            timestamp: new Date()
                        },
                        {
                            id: '2',
                            role: 'assistant',
                            content: 'Merhaba efendim! Size nasıl yardımcı olabilirim?',
                            timestamp: new Date()
                        }
                    ];
                    setMessages(mockHistory);
                } catch (error) {
                    console.error('Error loading chat history:', error);
                }
            };

            const speak = (text) => {
                if (!voiceEnabled) return;

                // Önceki konuşmayı durdur
                synthRef.current.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'tr-TR';
                utterance.rate = 1.0;
                utterance.pitch = 1.0;
                utterance.volume = 1.0;

                // Türkçe ses seç
                const voices = synthRef.current.getVoices();
                const turkishVoice = voices.find(voice => voice.lang.startsWith('tr'));
                if (turkishVoice) {
                    utterance.voice = turkishVoice;
                }

                utterance.onstart = () => setIsSpeaking(true);
                utterance.onend = () => setIsSpeaking(false);
                utterance.onerror = () => setIsSpeaking(false);

                synthRef.current.speak(utterance);
            };

            const handleSendMessage = async () => {
                if (!inputValue.trim()) return;

                const userMessage = {
                    id: Date.now().toString(),
                    role: 'user',
                    content: inputValue,
                    timestamp: new Date()
                };

                setMessages(prev => [...prev, userMessage]);
                const currentInput = inputValue;
                setInputValue('');
                setIsLoading(true);

                try {
                    // Enhanced AI call with web search
                    const aiResponse = await getEnhancedAIResponse(currentInput);
                    
                    // Save session ID if new
                    if (!sessionId) {
                        const newSessionId = 'session-' + Date.now();
                        setSessionId(newSessionId);
                        localStorage.setItem('jarvis_session_id', newSessionId);
                        loadSessions();
                    }

                    const assistantMessage = {
                        id: (Date.now() + 1).toString(),
                        role: 'assistant',
                        content: aiResponse,
                        timestamp: new Date()
                    };

                    setMessages(prev => [...prev, assistantMessage]);
                    setIsLoading(false);

                    // Sesli yanıt
                    speak(aiResponse);
                } catch (error) {
                    console.error('Error sending message:', error);
                    setIsLoading(false);
                    
                    const errorMessage = {
                        id: (Date.now() + 1).toString(),
                        role: 'assistant',
                        content: 'Üzgünüm efendim, bir hata oluştu. Lütfen tekrar deneyin.',
                        timestamp: new Date()
                    };
                    setMessages(prev => [...prev, errorMessage]);
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSendMessage();
                }
            };

            const toggleVoice = () => {
                if (isSpeaking) {
                    synthRef.current.cancel();
                    setIsSpeaking(false);
                }
                setVoiceEnabled(!voiceEnabled);
            };

            const startNewChat = () => {
                setMessages([]);
                setSessionId(null);
                localStorage.removeItem('jarvis_session_id');
            };

            const loadSession = async (sid) => {
                setSessionId(sid);
                localStorage.setItem('jarvis_session_id', sid);
                await loadChatHistory(sid);
                setIsHistoryOpen(false);
            };

            const formatTime = (date) => {
                return new Date(date).toLocaleTimeString('tr-TR', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
            };

            const formatDate = (date) => {
                return new Date(date).toLocaleDateString('tr-TR', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-950 flex items-center justify-center p-4">
                    <div className="w-full max-w-5xl h-[90vh] flex flex-col">
                        {/* Header */}
                        <div className="bg-slate-900/50 backdrop-blur-xl border border-blue-500/20 rounded-t-2xl p-6 shadow-2xl">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center space-x-4">
                                    <div className="relative">
                                        <div className="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full flex items-center justify-center shadow-lg shadow-blue-500/50">
                                            <svg className="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                                            </svg>
                                        </div>
                                        {isSpeaking && (
                                            <div className="absolute inset-0 bg-blue-500 rounded-full animate-ping opacity-75"></div>
                                        )}
                                    </div>
                                    <div>
                                        <h1 className="text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">
                                            J.A.R.V.I.S
                                        </h1>
                                        <p className="text-blue-300 text-sm">Sesli Asistan</p>
                                    </div>
                                </div>
                                <div className="flex items-center space-x-2">
                                    <button
                                        onClick={startNewChat}
                                        className="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-blue-500/30 hover:bg-blue-500/10 h-10 w-10"
                                        title="Yeni Sohbet"
                                    >
                                        <svg className="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                                        </svg>
                                    </button>
                                    
                                    <button
                                        onClick={() => setIsHistoryOpen(!isHistoryOpen)}
                                        className="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-blue-500/30 hover:bg-blue-500/10 h-10 w-10"
                                        title="Geçmiş Sohbetler"
                                    >
                                        <svg className="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </button>
                                    
                                    <button
                                        onClick={toggleVoice}
                                        className="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-blue-500/30 hover:bg-blue-500/10 h-10 w-10"
                                    >
                                        {voiceEnabled ? (
                                            <svg className="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                                            </svg>
                                        ) : (
                                            <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15zM17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2" />
                                            </svg>
                                        )}
                                    </button>
                                </div>
                            </div>
                        </div>

                        {/* Chat Area */}
                        <div className="flex-1 bg-slate-900/30 backdrop-blur-xl border-x border-blue-500/20 overflow-hidden flex flex-col shadow-2xl rounded-lg">
                            <div className="flex-1 overflow-y-auto p-6 space-y-4 scrollbar-thin scrollbar-thumb-blue-500/50 scrollbar-track-transparent">
                                {messages.length === 0 ? (
                                    <div className="flex items-center justify-center h-full">
                                        <div className="text-center space-y-4">
                                            <div className="w-24 h-24 mx-auto bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full flex items-center justify-center shadow-lg shadow-blue-500/50">
                                                <svg className="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                                                </svg>
                                            </div>
                                            <h2 className="text-2xl font-bold text-blue-400">Merhaba Efendim!</h2>
                                            <p className="text-blue-300/70">Size nasıl yardımcı olabilirim?</p>
                                        </div>
                                    </div>
                                ) : (
                                    messages.map((message) => (
                                        <div
                                            key={message.id}
                                            className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'} animate-in slide-in-from-bottom-2 duration-300`}
                                        >
                                            <div
                                                className={`max-w-[70%] rounded-2xl p-4 shadow-lg transition-all duration-300 hover:scale-[1.02] ${
                                                    message.role === 'user'
                                                        ? 'bg-gradient-to-br from-blue-600 to-blue-700 text-white'
                                                        : 'bg-slate-800/50 backdrop-blur-sm border border-blue-500/20 text-blue-100'
                                                }`}
                                            >
                                                <p className="text-sm leading-relaxed">{message.content}</p>
                                                <p className="text-xs mt-2 opacity-60">{formatTime(message.timestamp)}</p>
                                            </div>
                                        </div>
                                    ))
                                )}
                                {isLoading && (
                                    <div className="flex justify-start">
                                        <div className="bg-slate-800/50 backdrop-blur-sm border border-blue-500/20 rounded-2xl p-4 shadow-lg">
                                            <div className="flex space-x-2">
                                                <div className="w-2 h-2 bg-blue-400 rounded-full animate-bounce"></div>
                                                <div className="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                                                <div className="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                                <div ref={messagesEndRef} />
                            </div>
                        </div>

                        {/* Input Area */}
                        <div className="bg-slate-900/50 backdrop-blur-xl border border-blue-500/20 rounded-b-2xl p-6 shadow-2xl">
                            <div className="flex space-x-3">
                                <input
                                    value={inputValue}
                                    onChange={(e) => setInputValue(e.target.value)}
                                    onKeyPress={handleKeyPress}
                                    placeholder="Jarvis'e bir şeyler yazın..."
                                    className="flex-1 h-10 w-full rounded-md border border-blue-500/30 bg-slate-800/50 px-3 py-2 text-sm text-white placeholder:text-blue-300/50 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-300"
                                    disabled={isLoading}
                                />
                                <button
                                    onClick={handleSendMessage}
                                    disabled={isLoading || !inputValue.trim()}
                                    className="bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white shadow-lg shadow-blue-500/50 transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                    </svg>
                                </button>
                            </div>
                            <div className="flex items-center justify-between mt-3">
                                <p className="text-xs text-blue-300/50">
                                    Jarvis ile Türkçe konuşun - Mesajlarınız sesli olarak yanıtlanacak
                                </p>
                                <p className="text-xs text-blue-400/30">
                                    Kıvanç Tarafından Oluşturulmuş
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Ana App Component
        const App = () => {
            return (
                <div className="App">
                    <ChatInterface />
                </div>
            );
        };

        // React'i başlat
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
